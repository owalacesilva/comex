# Basic Apache HTTP Server Configuration

# Server identification
ServerName localhost
ServerAdmin webmaster@localhost
ServerTokens Prod
ServerSignature Off

# Core server configuration
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5

# Performance settings
HostnameLookups Off

# Modules configuration
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule dir_module modules/mod_dir.so
LoadModule mime_module modules/mod_mime.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule alias_module modules/mod_alias.so
LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
LoadModule php_module modules/libphp.so

# Listen on port 8080
Listen 8080

# Default MIME type
DefaultType text/plain

# Directory index files
DirectoryIndex index.php index.html

# PHP configuration
AddType application/x-httpd-php .php
AddHandler php-script .php

# Default virtual host configuration
<VirtualHost *:8080>
    ServerName localhost
    DocumentRoot /var/www/html/public

    <Directory /var/www/html/public>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted

        # Enable .htaccess files
        <Files ".ht*">
            Require all denied
        </Files>
    </Directory>

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Set environment variables
    SetEnv APP_ENV production
</VirtualHost>

# Security settings
TraceEnable Off
ServerTokens Prod
ServerSignature Off